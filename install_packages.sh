#!/bin/bash

# 更新软件包列表
sudo apt update

# 安装所有指定版本的软件包（包含依赖）
sudo apt install -y \
libgnutls30=3.7.9-2+deb12u4 \
hicolor-icon-theme=0.17-2 \
libexpat1=2.5.0-1+deb12u1 \
gsettings-desktop-schemas=43.0-1 \
libupower-glib3=0.99.20-2 \
libxentoollog1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
gstreamer1.0-plugins-base=1.22.0-3+deb12u4 \
libvirt0=9.0.0-4+deb12u2 \
mount=2.38.1-5+deb12u3 \
python3.11-minimal=3.11.2-6+deb12u6 \
libsmbios-dev=2.4.3-1 \
libspice-server1=0.15.1-1 \
python3-distutils=3.11.2-3 \
quotatool=1:1.6.2-6 \
libgnutls-dane0=3.7.9-2+deb12u4 \
libjson-glib-1.0-common=1.6.6-1 \
libonig5=6.9.8-1 \
libvirt-daemon-driver-qemu=9.0.0-4+deb12u2 \
libxentoolcore1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
libtag1v5=1.13-2 \
libxml2-utils=2.9.14+dfsg-1.3~deb12u1 \
libhd21=21.82-1 \
libndctl6=76.1-1 \
libnutscan2=2.8.0-7 \
libiscsi7=1.19.0-3 \
python3-openvswitch=3.1.0-2+deb12u1 \
uuid-runtime=2.38.1-5+deb12u3 \
libfdisk1=2.38.1-5+deb12u3 \
libbrlapi0.8=6.5-7+deb12u1 \
openvswitch-common=3.1.0-2+deb12u1 \
rdma-core=44.0-2 \
libcephfs2=16.2.15+ds-0+deb12u1 \
libjson-glib-1.0-0=1.6.6-1 \
glib-networking-services=2.74.0-4 \
libgtk-3-common=3.24.38-2~deb12u3 \
gstreamer1.0-libav=1.22.0-2 \
glib-networking=2.74.0-4 \
libpmem1=1.12.1-2 \
libpython3.11=3.11.2-6+deb12u6 \
libxengnttab1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
libvorbis-dev=1.3.7-1 \
librte-kvargs23=22.11.8-1~deb12u1 \
swtpm=0.7.1-1.3 \
upower=0.99.20-2 \
libjq1=1.6-2.1 \
libflac-dev=1.4.2+ds-2 \
python3-wheel=0.38.4-2 \
python3-setuptools=66.1.1-1+deb12u1 \
util-linux=2.38.1-5+deb12u3 \
qemu-utils=1:7.2+dfsg-7+deb12u13 \
nut-client=2.8.0-7 \
fdisk=2.38.1-5+deb12u3 \
at-spi2-core=2.46.0-5 \
libxenforeignmemory1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
libvirt-daemon=9.0.0-4+deb12u2 \
libxencall1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
libxenhypfs1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
hwinfo=21.82-1 \
python3.11=3.11.2-6+deb12u6 \
libvirt-clients=9.0.0-4+deb12u2 \
adwaita-icon-theme=43-1 \
libsoup2.4-1=2.74.3-1+deb12u1 \
systemd=252.38-1~deb12u1 \
gnutls-bin=3.7.9-2+deb12u4 \
libxenevtchn1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
swtpm-tools=0.7.1-1.3 \
libxenstore4=4.17.5+23-ga4e5191dc0-1+deb12u1 \
openvswitch-switch=3.1.0-2+deb12u1 \
qemu-system-common=1:7.2+dfsg-7+deb12u13 \
librte-eal23=22.11.8-1~deb12u1 \
libvirt-daemon-driver-lxc=9.0.0-4+deb12u2 \
nut-server=2.8.0-7 \
python3-pip=23.0.1+dfsg-1 \
qemu-system-x86=1:7.2+dfsg-7+deb12u13 \
jq=1.6-2.1 \
util-linux-locales=2.38.1-5+deb12u3 \
librte-bus-vdev23=22.11.8-1~deb12u1 \
librte-meter23=22.11.8-1~deb12u1 \
libgtk-3-0=3.24.38-2~deb12u3 \
librte-pci23=22.11.8-1~deb12u1 \
libvirt-daemon-driver-vbox=9.0.0-4+deb12u2 \
libpam-systemd=252.38-1~deb12u1 \
librte-bus-vmbus23=22.11.8-1~deb12u1 \
libxendevicemodel1=4.17.5+23-ga4e5191dc0-1+deb12u1 \
libnss-systemd=252.38-1~deb12u1 \
libvte-2.91-0=0.70.6-2~deb12u1 \
qemu-block-extra=1:7.2+dfsg-7+deb12u13 \
python3.11-venv=3.11.2-6+deb12u6 \
gstreamer1.0-plugins-good=1.22.0-5+deb12u2 \
systemd-container=252.38-1~deb12u1 \
libnss-mymachines=252.38-1~deb12u1 \
systemd-timesyncd=252.38-1~deb12u1 \
qemu-system-gui=1:7.2+dfsg-7+deb12u13 \
libvirt-daemon-system-systemd=9.0.0-4+deb12u2 \
librte-ring23=22.11.8-1~deb12u1 \
libgtk-3-bin=3.24.38-2~deb12u3 \
librte-bus-auxiliary23=22.11.8-1~deb12u1 \
libvirt-daemon-system=9.0.0-4+deb12u2 \
librte-bus-pci23=22.11.8-1~deb12u1 \
librte-dmadev23=22.11.8-1~deb12u1 \
nut=2.8.0-7 \
libxenmisc4.17=4.17.5+23-ga4e5191dc0-1+deb12u1 \
librte-mempool23=22.11.8-1~deb12u1 \
libvirt-daemon-driver-xen=9.0.0-4+deb12u2 \
librte-rcu23=22.11.8-1~deb12u1 \
librte-mempool-ring23=22.11.8-1~deb12u1 \
librte-mbuf23=22.11.8-1~deb12u1 \
librte-cryptodev23=22.11.8-1~deb12u1 \
librte-sched23=22.11.8-1~deb12u1 \
librte-net23=22.11.8-1~deb12u1 \
librte-hash23=22.11.8-1~deb12u1 \
librte-security23=22.11.8-1~deb12u1 \
librte-ethdev23=22.11.8-1~deb12u1 \
librte-common-mlx5-23=22.11.8-1~deb12u1 \
librte-net-e1000-23=22.11.8-1~deb12u1 \
librte-net-fm10k23=22.11.8-1~deb12u1 \
librte-net-virtio23=22.11.8-1~deb12u1 \
librte-ip-frag23=22.11.8-1~deb12u1 \
librte-net-thunderx23=22.11.8-1~deb12u1 \
librte-net-netvsc23=22.11.8-1~deb12u1 \
librte-net-i40e23=22.11.8-1~deb12u1 \
librte-net-mlx5-23=22.11.8-1~deb12u1 \
librte-net-pcap23=22.11.8-1~deb12u1 \
librte-net-vmxnet3-23=22.11.8-1~deb12u1 \
librte-net-af-packet23=22.11.8-1~deb12u1 \
librte-net-ixgbe23=22.11.8-1~deb12u1 \
librte-vhost23=22.11.8-1~deb12u1 \
librte-net-bond23=22.11.8-1~deb12u1 \
librte-gso23=22.11.8-1~deb12u1 \
librte-net-mlx4-23=22.11.8-1~deb12u1 \
librte-net-vdev-netvsc23=22.11.8-1~deb12u1 \
openvswitch-switch-dpdk=3.1.0-2+deb12u1 \
librte-net-vhost23=22.11.8-1~deb12u1 \
librte-net-tap23=22.11.8-1~deb12u1

# 验证安装结果
echo "安装完成，正在验证软件包版本..."
for pkg in $(dpkg -l | grep -E '^ii' | awk '{print $2}'); do
    version=$(dpkg -s $pkg 2>/dev/null | grep Version | awk '{print $2}')
    echo "$pkg: $version"
done